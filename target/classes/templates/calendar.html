<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        /* START TOOLTIP STYLES */
        [tooltip] {
          position: relative; /* opinion 1 */
        }

        /* Applies to all tooltips */
        [tooltip]::before,
        [tooltip]::after {
          text-transform: none; /* opinion 2 */
          font-size: .9em; /* opinion 3 */
          line-height: 1;
          user-select: none;
          pointer-events: none;
          position: absolute;
          display: none;
          opacity: 0;
        }
        [tooltip]::before {
          content: '';
          border: 5px solid transparent; /* opinion 4 */
          z-index: 1001; /* absurdity 1 */
        }
        [tooltip]::after {
          content: attr(tooltip); /* magic! */

          /* most of the rest of this is opinion */
          font-family: Helvetica, sans-serif;
          text-align: center;

          /*
            Let the content set the size of the tooltips
            but this will also keep them from being obnoxious
            */
          min-width: 3em;
          max-width: 21em;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          padding: 1ch 1.5ch;
          border-radius: .3ch;
          box-shadow: 0 1em 2em -.5em rgba(0, 0, 0, 0.35);
          background: #333;
          color: #fff;
          z-index: 1000; /* absurdity 2 */
        }

        /* Make the tooltips respond to hover */
        [tooltip]:hover::before,
        [tooltip]:hover::after {
          display: block;
        }

        /* don't show empty tooltips */
        [tooltip='']::before,
        [tooltip='']::after {
          display: none !important;
        }

        /* FLOW: UP */
        [tooltip]:not([flow])::before,
        [tooltip][flow^="up"]::before {
          bottom: 100%;
          border-bottom-width: 0;
          border-top-color: #333;
        }
        [tooltip]:not([flow])::after,
        [tooltip][flow^="up"]::after {
          bottom: calc(100% + 5px);
        }
        [tooltip]:not([flow])::before,
        [tooltip]:not([flow])::after,
        [tooltip][flow^="up"]::before,
        [tooltip][flow^="up"]::after {
          left: 50%;
          transform: translate(-50%, -.5em);
        }

        /* KEYFRAMES */
        @keyframes tooltips-vert {
          to {
            opacity: .9;
            transform: translate(-50%, 0);
          }
        }

        @keyframes tooltips-horz {
          to {
            opacity: .9;
            transform: translate(0, -50%);
          }
        }

        /* FX All The Things */
        [tooltip]:not([flow]):hover::before,
        [tooltip]:not([flow]):hover::after {
          animation: tooltips-vert 300ms ease-out forwards;
        }
    </style>
    <title>Календарь</title>
</head>
<body class="d-flex h-100 text-center text-dark">
<div class="container d-flex w-100 h-100 p-3 mx-auto flex-column min-vh-100">

    <div class="mb-auto" th:replace="blocks/header.html :: header"></div>

    <main>
        <div class="d-flex flex-row flex-wrap justify-content-between mt-5 mb-5">
            <div class="d-flex flex-column" th:each="month : ${months}">
                <table class="table table-bordered">
                    <thead>
                    <tr class="table-secondary text-dark">
                        <th colspan="7" th:text="${monthNames[month.month - 1]}"></th>
                    </tr>
                    <tr class="table-light text-dark">
                        <th>ПН</th>
                        <th>ВТ</th>
                        <th>СР</th>
                        <th>ЧТ</th>
                        <th>ПТ</th>
                        <th>СБ</th>
                        <th>ВС</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="week : ${month.weeks}">
                        <td th:each="day : ${week.days}" th:attr="tooltip=${day.dayOfMonth + ' ' + monthNames[month.month - 1] + ' ' + getEventNames(events)}">
                            <span th:text="${day.dayOfMonth}"></span>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div>
                    <table class="table">
                    <th:block th:each="event : ${events}">
                        <th:block th:if="${event.getDate().replaceAll('^0+','').substring(0,1) == '' + month.month}">
                            <tr>
                                <td th:text="${event.getDate().substring(3,5)}"></td>
                                <td th:text="${event.name}"></td>
                            </tr>
                        </th:block>
                    </th:block>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <div class="mt-auto" th:replace="blocks/footer.html :: footer"></div>

</div>
</body>
</html>